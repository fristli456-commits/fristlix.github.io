<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>FristliX</title>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { 
    getAuth, 
    createUserWithEmailAndPassword, 
    signInWithEmailAndPassword, 
    signOut, 
    onAuthStateChanged 
  } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

  // üî¥ –í–°–¢–ê–í–¨ –°–Æ–î–ê –°–í–û–ô firebaseConfig
  const firebaseConfig = {
    apiKey: "AIzaSyBYXn3CBVRWocJW6V8nqqZyeHSTrmVwvcw",
    authDomain: "fristlix.firebaseapp.com",
    projectId: "fristlix",
    storageBucket: "fristlix.firebasestorage.app",
    messagingSenderId: "161841516321",
    appId: "1:161841516321:web:db2fe4d40047a99807f860",
    measurementId: "G-SRR2SFHGYF"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  window.register = async () => {
    const email = document.getElementById("reg-email").value;
    const password = document.getElementById("reg-password").value;

    try {
      await createUserWithEmailAndPassword(auth, email, password);
      alert("–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!");
    } catch (e) {
      alert(e.message);
    }
  };

  window.login = async () => {
    const email = document.getElementById("login-email").value;
    const password = document.getElementById("login-password").value;

    try {
      await signInWithEmailAndPassword(auth, email, password);
      alert("–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω!");
    } catch (e) {
      alert(e.message);
    }
  };

  window.logout = async () => {
    await signOut(auth);
  };

  onAuthStateChanged(auth, (user) => {
    const status = document.getElementById("status");
    if (user) {
      status.innerHTML = `–í—ã –≤–æ—à–ª–∏ –∫–∞–∫: <b>${user.email}</b>`;
      document.getElementById("auth").style.display = "none";
      document.getElementById("profile").style.display = "block";
    } else {
      status.innerHTML = "–í—ã –Ω–µ –≤–æ—à–ª–∏";
      document.getElementById("auth").style.display = "block";
      document.getElementById("profile").style.display = "none";
    }
  });
</script>

<style>
body {
  background:#0b0b0b;
  color:white;
  font-family:Arial;
  text-align:center;
}
.box {
  border:1px solid red;
  padding:20px;
  margin:20px auto;
  width:300px;
  border-radius:10px;
}
input {
  width:90%;
  padding:8px;
  margin:5px;
  background:black;
  border:1px solid red;
  color:white;
}
button {
  background:red;
  border:none;
  padding:10px 20px;
  color:white;
  cursor:pointer;
}
</style>
</head>

<body>

<h1 style="color:red;">FristliX</h1>
<p id="status">–ó–∞–≥—Ä—É–∑–∫–∞...</p>

<div id="auth">
  <div class="box">
    <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
    <input id="reg-email" placeholder="Email">
    <input id="reg-password" type="password" placeholder="–ü–∞—Ä–æ–ª—å">
    <button onclick="register()">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
  </div>

  <div class="box">
    <h2>–í—Ö–æ–¥</h2>
    <input id="login-email" placeholder="Email">
    <input id="login-password" type="password" placeholder="–ü–∞—Ä–æ–ª—å">
    <button onclick="login()">–í–æ–π—Ç–∏</button>
  </div>
</div>

<div id="profile" style="display:none;">
  <div class="box">
    <h2>–ü—Ä–æ—Ñ–∏–ª—å</h2>
    <p>–í—ã —É—Å–ø–µ—à–Ω–æ –≤–æ—à–ª–∏ üéâ</p>
    <button onclick="logout()">–í—ã–π—Ç–∏</button>
  </div>
</div>

</body>
</html>
